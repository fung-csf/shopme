package com.shopme.admin.category;

import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.shopme.common.entity.Category;

@Service
public class CategoryService {

	@Autowired
	private CategoryRepository repo;
	
	public List<Category> listAll(){
		return (List<Category>) repo.findAll();
	}
	
	public List<Category> listCategoriesUsedInForm(){
		
		List<Category> categoriesUsedInForm = new ArrayList<>();
		
		Iterable<Category> categoriesInDB = repo.findAll();
		
		for (Category category : categoriesInDB) {

			// root category
			if (category.getParent() == null) {
				System.out.println(category.getName());

				category.getChildren().forEach(subCategory -> {

					System.out.println("--" + subCategory.getName());
					printChildren(subCategory, 1);
				});
			}

		}
		
		
		return categoriesUsedInForm;
	}
}
