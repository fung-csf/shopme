<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">>

<body>

	<div th:fragment="menu">
		<!--   
			use  the form to  log out and navigate to the url path /logout  
		
		    NOTE: spring security requires a POST request form to logout in order to obtain the csrf token, 
		 		the csrf token is a hidden property in the form -->
		 
		<form th:action="@{/logout}" method="post" th:hidden="true" name="logoutForm">
			<input type="submit"/>
		</form>
		<nav class="navbar navbar-expand-lg bg-dark navbar-dark">
			<a class="navbar-brand" th:href="@{/}">
				<img th:src="@{/images/ShopmeAdminSmall.png}"/>
			</a>
			<!--hamburger toggler for mobile devices(responsive)-->
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#topNavbar">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="topNavbar">
				<ul class="navbar-nav">
					<!-- only permit Admin user to access this module -->
					<li class="nav-item" sec:authorize="hasAuthority('Admin')">
						<a class="nav-link" th:href="@{/users}">Users</a>
					</li>
					
					<th:block sec:authorize="hasAuthority('Admin', 'Editor')">
						<li class="nav-item">
							<a class="nav-link" th:href="@{/categories}">Categories</a>
						</li>
					</th:block>
					
					<li class="nav-item">
						<a class="nav-link" th:href="@{/brands}">Brands</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/products}">Products</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/customers}">Customers</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/shipping}">Shipping</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/orders}">Orders</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/report}">Sales Report</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/articles}">Articles</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/menus}">Menus</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/settings}" sec:authorize="hasAuthority('Admin')">Settings</a>
					</li>
					<li>
						<span class="fas fa-user fa-2x icon-silver"></span>
					</li>
					<li class="nav-item dropdown">
							<!-- principal refers to user; display username -->
						<a class="nav-link dropdown-toggle" sec:authentication="principal.fullname" 
						data-toggle="dropdown"
						th:href="@{/account}"></a>
						<div class="dropdown-menu">
							<a class="dropdown-item" id="logoutLink" href="">Logout</a>
						</div>
						
					</li>
				</ul>
			</div>
			
		</nav>
	</div>
	
	
</body>
</html>